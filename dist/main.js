(()=>{"use strict";function e(e){localStorage.setItem("tasks",JSON.stringify(e))}function t(){return localStorage.getItem("tasks")?JSON.parse(localStorage.getItem("tasks")):[]}const s=function(s){const n=t(),d={description:s,completed:!1,index:n.length+1};n.push(d),e(n)},n=s=>{const n=t().filter(((e,t)=>t!==s));n.forEach(((e,t)=>{e.index=t+1})),e(n)},d=()=>{const a=t(),c=document.getElementById("tasks");c.innerHTML="";const i=document.createElement("li"),l=document.createElement("h1"),o=document.createElement("div");o.classList.add("icon-refresh"),l.textContent="Today's To Do",l.classList.add("heading"),i.appendChild(l),i.appendChild(o),c.appendChild(i),o.addEventListener("click",(()=>{o.classList.add("rotate"),setTimeout((()=>{o.classList.remove("rotate"),d()}),2e3)}));const r=document.createElement("input");r.classList.add("add-task"),r.id="add-task",r.type="text",r.placeholder="Add to your list";const m=document.createElement("input");m.classList.add("icon-return"),m.type="submit",m.value="",m.id="submit-new-item",m.title="click this or press enter to submit";const p=document.createElement("li");p.appendChild(r),p.appendChild(m),c.appendChild(p);const u=()=>{""!==r.value.trim()&&(s(r.value.trim()),d(),r.value="",document.getElementById("add-task").focus())};r.addEventListener("keydown",(e=>{"Enter"===e.key&&u()})),m.addEventListener("click",(()=>{u()})),a.forEach(((t,s)=>{const i=document.createElement("li");i.setAttribute("id",s+1);const l=((t,s,n)=>{const d=document.createElement("input");return d.classList.add("checkbox"),d.type="checkbox",d.checked=t.completed,d.addEventListener("change",(d=>{t.completed=d.target.checked,e(s),n(s)})),d})(t,a,d);i.appendChild(l);const o=document.createElement("button");o.className="remove-task",o.classList.add("hidden");const r=document.createElement("textarea");r.setAttribute("rows","1"),r.value=t.description,!0===t.completed&&r.classList.add("completed"),r.addEventListener("focus",(()=>{o.classList.remove("hidden"),o.addEventListener("mousedown",(()=>{n(s),d(a)}))})),r.addEventListener("blur",(()=>{o.classList.add("hidden")})),r.addEventListener("input",(e=>{t.description=e.target.value,r.style.height="auto",r.style.height=`${r.scrollHeight}px`})),r.addEventListener("keydown",(s=>{"Enter"===s.key&&(s.preventDefault(),((e,t)=>{e.description=t.value})(t,r),e(a),d(a))})),i.appendChild(r),i.appendChild(o);const m=document.createElement("span");m.classList.add("dots"),i.appendChild(m),c.appendChild(i)}));const h=document.createElement("button");h.classList.add("clear-btn"),h.setAttribute("id","clear-all"),h.textContent="Clear completed tasks";const E=document.createElement("li");E.classList.remove("ripple"),h.addEventListener("click",(()=>{E.classList.add("ripple"),h.innerHTML="Done &#10003;",setTimeout((()=>{(()=>{const s=t().filter((e=>!e.completed));s.forEach(((e,t)=>{e.index=t+1})),e(s)})(),d(a)}),360)})),E.classList.add("clear-btn-container"),E.appendChild(h),c.appendChild(E)},a=d;(new class{constructor(e){this.tasks=[],this.listContainer=e,this.tasks=t(),this.render=a()}add(e){s(this)}remove(e){n(this)}displayList(){a(this),document.getElementById("add-task").focus()}}).displayList()})();